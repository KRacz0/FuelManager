brak dostępu /unauthorized.html

<h2>Informacje o użytkowniku</h2>
<p id="user-info">Sprawdzanie stanu sesji...</p>


<script>
    async function fetchCurrentUser() {
        try {
            const token = localStorage.getItem('token');
            if (!token) {
                document.getElementById('user-info').innerText = 'Nie jesteś zalogowany.';
                return;
            }

            const response = await fetch('/api/auth/current', {
                method: 'GET',
                headers: {
                    Authorization: `Bearer ${token}`,
                    'Content-Type': 'application/json',
                },
            });

            if (!response.ok) {
                document.getElementById('user-info').innerText = 'Nie jesteś zalogowany.';
                return;
            }

            const { email, role } = await response.json();
            document.getElementById('user-info').innerText = `Zalogowany jako: ${email} (Rola: ${role})`;
        } catch (error) {
            console.error('Błąd podczas pobierania danych użytkownika:', error);
            document.getElementById('user-info').innerText = 'Wystąpił błąd podczas sprawdzania sesji.';
        }
    }

    fetchCurrentUser();
</script>